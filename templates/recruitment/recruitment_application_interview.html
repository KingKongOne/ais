{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}
    <div class="container">
        <div class="row">
            <h3>{{ application.user.first_name }} {{ application.user.last_name }}</h3>
            <hr>
        </div>

    <div class="row">
        <form>
                            <div class="form-group">
                    <label for="interviewDate">Email</label>
                    <p class="form-control-static">{{ application.user.email }}</p>
                </div>
    </form>
<hr>
    </div>


        <div class="row">
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}

                <div class="form-group">
                    <label>Interviewer</label>
                    <select class="form-control" name="interviewer">
                        <option value="">---------</option>
                        {% for user in users %}
                            <option value="{{ user.id }}" {% if user == application.interviewer %}
                                    selected {% endif %}>{{ user }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="interviewDate">Interview date</label>
                    <input type="text" class="form-control" id="interviewDate" name="interview_date"
                           value="{%  if application.interview_date %}{{ application.interview_date }}{% endif %}">
                </div>

                <div class="form-group">
                    <label for="interviewLocation">Interview place</label>
                    <input type="text" class="form-control" id="interviewLocation" name="interview_location"
                           value="{%  if application.interview_location %}{{ application.interview_location }}{% endif %}">
                </div>

                <div class="form-group">
                    <label>Recommended role</label>
                    <select class="form-control" name="recommended_role">
                        <option value="">---------</option>
                        {% for role in roles %}
                            <option value="{{ role.id }}" {% if role == application.recommended_role %}
                                    selected {% endif %}>{{ role }}</option>
                        {% endfor %}
                    </select>
                </div>


                <div class="form-group">
                    <label>Rating</label>
                    <select class="form-control" name="rating">
                        {% for rating in ratings %}
                            <option value="{{ rating }}" {% if rating == application.rating %}
                                    selected {% endif %}>{{ rating }}</option>
                        {% endfor %}
                    </select>
                </div>



                {% for question, answer in interviewQuestions %}
                    {% if question.fieldType == field_type.text_field %}
                        <div class="form-group">
                            <label for="{{ question.id }}">{{ question.question }}</label>
                            <input type="text" class="form-control" id="{{ question.id }}" name="{{ question.id }}"
                                   value="{{ answer.answer }}">
                        </div>
                    {% elif question.fieldType == field_type.check_box %}
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" name="{{ question.id }}" {% if answer %}
                                       checked {% endif %}> {{ question.question }}
                            </label>
                        </div>
                    {% elif question.fieldType == field_type.text_area %}
                        <div class="form-group">
                            <label for="{{ question.id }}">{{ question.question }}</label>
                            <textarea class="form-control" rows="3" id="{{ question.id }}"
                                      name="{{ question.id }}">{{ answer.answer }}</textarea>
                        </div>
                    {% elif question.fieldType == field_type.radio_buttons %}
                        <label class="radio control-label">{{ question }}</label>
                        {% for argument in question.argument.all %}
                            <div class="radio">
                                <label>
                                    <input type="radio" name="{{ question.id }}" value="{{ argument.id }}"
                                            {% if answer.answer == argument.id_as_string %} checked {% endif %}> {{ argument.value }}
                                </label>
                            </div>
                        {% endfor %}
                    {% elif question.fieldType == field_type.file %}
                        <div class="form-group">
                            <label for="{{ question.id }}">{{ question }}</label>
                            <input type="file" id="{{ question.id }}" name="{{ question.id }}">
                            <p><a href="/media/{{ answer.answer }}">{{ answer.answer }}</a></p>
                        </div>
                    {% elif question.fieldType == field_type.image %}
                        <div class="form-group">
                            <label for="{{ question.id }}">{{ question }}</label>
                            <input type="file" id="{{ question.id }}" name="{{ question.id }}" accept="image/*">
                            {% if answer.answer %}
                                <br>
                                <div><img src="/media/{{ answer.answer }}" width="500"></div>
                            {% endif %}

                        </div>
                    {% else %}
                        UNKNOWN FIELD TYPE!
                    {% endif %}
                {% endfor %}

                                    <div class="form-group">
            <label>Delegated role</label>
                    <select class="form-control" name="delegated_role">
                        <option value="">---------</option>
                        {% for role in roles %}
                            <option value="{{ role.id }}" {% if role == application.delegated_role %}
                                    selected {% endif %}>{{ role }}</option>
                        {% endfor %}
                    </select>
            </div>
        <div class="form-group">
        <label>Superior</label>
            <select class="form-control" name="superior_user">
                        <option value="">---------</option>
                        {% for user in users %}
                            <option value="{{ user.id }}" {% if user == application.superior_user %}
                                    selected {% endif %}>{{ user }}</option>
                        {% endfor %}
                    </select>
        </div>

                <hr>

                {% for question, answer in custom_fields %}
                    {% if question.field_type == 'text_field' %}
                        <div class="form-group">
                            <label for="{{ question.id }}">{{ question.question }}</label>
                            <input type="text" class="form-control" id="{{ question.id }}" name="{{ question.id }}"
                                   value="{{ answer.answer }}">
                        </div>
                    {% elif question.field_type == 'check_box' %}
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" name="{{ question.id }}" {% if answer %}
                                       checked {% endif %}> {{ question.question }}
                            </label>
                        </div>
                    {% elif question.field_type == 'text_area' %}
                        <div class="form-group">
                            <label for="{{ question.id }}">{{ question.question }}</label>
                            <textarea class="form-control" rows="3" id="{{ question.id }}"
                                      name="{{ question.id }}">{{ answer.answer }}</textarea>
                        </div>
                    {% elif question.field_type == 'radio_buttons' %}
                        <label class="radio control-label">{{ question }}</label>
                        {% for argument in question.argument.all %}
                            <div class="radio">
                                <label>
                                    <input type="radio" name="{{ question.id }}" value="{{ argument.id }}"
                                            {% if answer.answer == argument.id_as_string %} checked {% endif %}> {{ argument.value }}
                                </label>
                            </div>
                        {% endfor %}
                    {% elif question.field_type == 'file' %}
                        <div class="form-group">
                            <label for="{{ question.id }}">{{ question }}</label>
                            <input type="file" id="{{ question.id }}" name="{{ question.id }}">
                            <p><a href="/media/{{ answer.answer }}">{{ answer.answer }}</a></p>
                        </div>
                    {% elif question.field_type == 'image' %}
                        <div class="form-group">
                            <label for="{{ question.id }}">{{ question }}</label>
                            <input type="file" id="{{ question.id }}" name="{{ question.id }}" accept="image/*">
                            {% if answer.answer %}
                                <br>
                                <div><img src="/media/{{ answer.answer }}" width="500"></div>
                            {% endif %}

                        </div>
                    {% else %}
                        UNKNOWN FIELD TYPE!
                    {% endif %}
                {% endfor %}
                <button type="submit" class="btn btn-primary">Save</button>

            </form>
        </div>


    </div>

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
    <script>
        $(document).ready(function () {
            $('.datepicker').datepicker();
        });
    </script>
{% endblock %}
